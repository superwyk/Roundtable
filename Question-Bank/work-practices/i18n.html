<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端多语言方案实现总结 | Roundtable Coders</title>
    <meta name="description" content="A knowledge base created by ESOP-FED">
    <link rel="manifest" href="/Roundtable/manifest.json">
  <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/Roundtable/assets/css/0.styles.f83e9b7c.css" as="style"><link rel="preload" href="/Roundtable/assets/js/app.d395b3ed.js" as="script"><link rel="preload" href="/Roundtable/assets/js/2.a96cdc04.js" as="script"><link rel="preload" href="/Roundtable/assets/js/62.3ac82e59.js" as="script"><link rel="prefetch" href="/Roundtable/assets/js/10.4ab0a57a.js"><link rel="prefetch" href="/Roundtable/assets/js/11.ac4ef3a4.js"><link rel="prefetch" href="/Roundtable/assets/js/12.06d659e5.js"><link rel="prefetch" href="/Roundtable/assets/js/13.2ed0f1e0.js"><link rel="prefetch" href="/Roundtable/assets/js/14.029d4fd9.js"><link rel="prefetch" href="/Roundtable/assets/js/15.24dd9e93.js"><link rel="prefetch" href="/Roundtable/assets/js/16.460f1cc3.js"><link rel="prefetch" href="/Roundtable/assets/js/17.478da7f1.js"><link rel="prefetch" href="/Roundtable/assets/js/18.7faaa786.js"><link rel="prefetch" href="/Roundtable/assets/js/19.05fa366a.js"><link rel="prefetch" href="/Roundtable/assets/js/20.053f418e.js"><link rel="prefetch" href="/Roundtable/assets/js/21.32741730.js"><link rel="prefetch" href="/Roundtable/assets/js/22.fa9578c4.js"><link rel="prefetch" href="/Roundtable/assets/js/23.f54b48ac.js"><link rel="prefetch" href="/Roundtable/assets/js/24.68ef281e.js"><link rel="prefetch" href="/Roundtable/assets/js/25.3d141ae3.js"><link rel="prefetch" href="/Roundtable/assets/js/26.fe375428.js"><link rel="prefetch" href="/Roundtable/assets/js/27.533f5bcb.js"><link rel="prefetch" href="/Roundtable/assets/js/28.f1ca34cb.js"><link rel="prefetch" href="/Roundtable/assets/js/29.379df5bb.js"><link rel="prefetch" href="/Roundtable/assets/js/3.c7b181eb.js"><link rel="prefetch" href="/Roundtable/assets/js/30.09ad7e00.js"><link rel="prefetch" href="/Roundtable/assets/js/31.15637ddd.js"><link rel="prefetch" href="/Roundtable/assets/js/32.660e9ef0.js"><link rel="prefetch" href="/Roundtable/assets/js/33.2dcc0167.js"><link rel="prefetch" href="/Roundtable/assets/js/34.f38e2bc3.js"><link rel="prefetch" href="/Roundtable/assets/js/35.2f617305.js"><link rel="prefetch" href="/Roundtable/assets/js/36.a3389f31.js"><link rel="prefetch" href="/Roundtable/assets/js/37.8c464367.js"><link rel="prefetch" href="/Roundtable/assets/js/38.3a25a918.js"><link rel="prefetch" href="/Roundtable/assets/js/39.9173b091.js"><link rel="prefetch" href="/Roundtable/assets/js/4.d77af3fd.js"><link rel="prefetch" href="/Roundtable/assets/js/40.f2f1950c.js"><link rel="prefetch" href="/Roundtable/assets/js/41.c1755e18.js"><link rel="prefetch" href="/Roundtable/assets/js/42.67bc835a.js"><link rel="prefetch" href="/Roundtable/assets/js/43.967002eb.js"><link rel="prefetch" href="/Roundtable/assets/js/44.09429888.js"><link rel="prefetch" href="/Roundtable/assets/js/45.e9ce7463.js"><link rel="prefetch" href="/Roundtable/assets/js/46.6012eee8.js"><link rel="prefetch" href="/Roundtable/assets/js/47.1fe01709.js"><link rel="prefetch" href="/Roundtable/assets/js/48.6651cdf5.js"><link rel="prefetch" href="/Roundtable/assets/js/49.341914e8.js"><link rel="prefetch" href="/Roundtable/assets/js/5.5286312b.js"><link rel="prefetch" href="/Roundtable/assets/js/50.ca77c81b.js"><link rel="prefetch" href="/Roundtable/assets/js/51.4588c7f2.js"><link rel="prefetch" href="/Roundtable/assets/js/52.2878d64e.js"><link rel="prefetch" href="/Roundtable/assets/js/53.b6020070.js"><link rel="prefetch" href="/Roundtable/assets/js/54.2a35ade4.js"><link rel="prefetch" href="/Roundtable/assets/js/55.11a909d8.js"><link rel="prefetch" href="/Roundtable/assets/js/56.b30c0b97.js"><link rel="prefetch" href="/Roundtable/assets/js/57.03ae6827.js"><link rel="prefetch" href="/Roundtable/assets/js/58.1a038e90.js"><link rel="prefetch" href="/Roundtable/assets/js/59.2da21658.js"><link rel="prefetch" href="/Roundtable/assets/js/6.b88910a4.js"><link rel="prefetch" href="/Roundtable/assets/js/60.fe9989a0.js"><link rel="prefetch" href="/Roundtable/assets/js/61.02171fc2.js"><link rel="prefetch" href="/Roundtable/assets/js/63.5ffcb8d6.js"><link rel="prefetch" href="/Roundtable/assets/js/64.c37100d7.js"><link rel="prefetch" href="/Roundtable/assets/js/65.17e9b801.js"><link rel="prefetch" href="/Roundtable/assets/js/66.2b151938.js"><link rel="prefetch" href="/Roundtable/assets/js/67.0a59b1c4.js"><link rel="prefetch" href="/Roundtable/assets/js/68.1ffc7a32.js"><link rel="prefetch" href="/Roundtable/assets/js/69.3c0dbb67.js"><link rel="prefetch" href="/Roundtable/assets/js/7.220af8d5.js"><link rel="prefetch" href="/Roundtable/assets/js/8.0ea184b4.js"><link rel="prefetch" href="/Roundtable/assets/js/9.f9c64785.js">
    <link rel="stylesheet" href="/Roundtable/assets/css/0.styles.f83e9b7c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Roundtable/" class="home-link router-link-active"><!----> <span class="site-name">Roundtable Coders</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Roundtable/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Roundtable/Question-Bank/" class="nav-link router-link-active">题库</a></div><div class="nav-item"><a href="/Roundtable/Lets-Read/" class="nav-link">共读</a></div><div class="nav-item"><a href="/Roundtable/Wanted/" class="nav-link">通缉令</a></div><div class="nav-item"><a href="/Roundtable/Quest-SC/" class="nav-link">源码探秘</a></div><div class="nav-item"><a href="/Roundtable/Algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="https://esop-fed.github.io/ani-css/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ani-Css
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="blog" class="dropdown-title"><span class="title">blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://johninch.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  johninch
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dannisi.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Caleb
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://niannings.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  niannings
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://Xmtd.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Xmtd
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://febcat.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  febcat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/johninch/Roundtable" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Roundtable
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/esop-fed" target="_blank" rel="noopener noreferrer" class="nav-link external">
  esop-fed
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/johninch" target="_blank" rel="noopener noreferrer" class="nav-link external">
  johninch
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dannisi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Caleb
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/niannings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  niannings
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Xmtd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Xmtd
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/febcat" target="_blank" rel="noopener noreferrer" class="nav-link external">
  febcat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Roundtable/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Roundtable/Question-Bank/" class="nav-link router-link-active">题库</a></div><div class="nav-item"><a href="/Roundtable/Lets-Read/" class="nav-link">共读</a></div><div class="nav-item"><a href="/Roundtable/Wanted/" class="nav-link">通缉令</a></div><div class="nav-item"><a href="/Roundtable/Quest-SC/" class="nav-link">源码探秘</a></div><div class="nav-item"><a href="/Roundtable/Algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="https://esop-fed.github.io/ani-css/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ani-Css
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="blog" class="dropdown-title"><span class="title">blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://johninch.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  johninch
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dannisi.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Caleb
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://niannings.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  niannings
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://Xmtd.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Xmtd
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://febcat.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  febcat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/johninch/Roundtable" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Roundtable
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/esop-fed" target="_blank" rel="noopener noreferrer" class="nav-link external">
  esop-fed
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/johninch" target="_blank" rel="noopener noreferrer" class="nav-link external">
  johninch
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/dannisi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Caleb
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/niannings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  niannings
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Xmtd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Xmtd
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/febcat" target="_blank" rel="noopener noreferrer" class="nav-link external">
  febcat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Roundtable/Question-Bank/" class="sidebar-link">题库 Question-Bank</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基本语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>包管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工作实践</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Roundtable/Question-Bank/work-practices/deploy.html" class="sidebar-link">前端工程化部署deploy</a></li><li><a href="/Roundtable/Question-Bank/work-practices/eleMessage.html" class="sidebar-link">ElementUI Message 二次封装</a></li><li><a href="/Roundtable/Question-Bank/work-practices/mobx-cases.html" class="sidebar-link">Mobx 使用踩坑记录</a></li><li><a href="/Roundtable/Question-Bank/work-practices/windowInject.html" class="sidebar-link">异步请求中打开新窗口拦截问题</a></li><li><a href="/Roundtable/Question-Bank/work-practices/deepcss.html" class="sidebar-link">vue css中/deep/深度选择</a></li><li><a href="/Roundtable/Question-Bank/work-practices/css-module.html" class="sidebar-link">简单易懂的CSS Modules</a></li><li><a href="/Roundtable/Question-Bank/work-practices/eslintPrettier.html" class="sidebar-link">团队代码质量：eslint+husky+prettier+lint-staged</a></li><li><a href="/Roundtable/Question-Bank/work-practices/i18n.html" class="active sidebar-link">前端多语言方案实现总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Roundtable/Question-Bank/work-practices/i18n.html#回顾" class="sidebar-link">回顾</a></li><li class="sidebar-sub-header"><a href="/Roundtable/Question-Bank/work-practices/i18n.html#总结回顾" class="sidebar-link">总结回顾</a></li><li class="sidebar-sub-header"><a href="/Roundtable/Question-Bank/work-practices/i18n.html#对比" class="sidebar-link">对比</a></li><li class="sidebar-sub-header"><a href="/Roundtable/Question-Bank/work-practices/i18n.html#方案3" class="sidebar-link">方案3</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端多语言方案实现总结"><a href="#前端多语言方案实现总结" aria-hidden="true" class="header-anchor">#</a> 前端多语言方案实现总结</h1> <h2 id="回顾"><a href="#回顾" aria-hidden="true" class="header-anchor">#</a> 回顾</h2> <p>对于国际化的实现现在已经有很多成熟的方案了，不论是Vue、React或者其他框架，甚至nodejs。
最近在做一个Vue项目的国际化，此前也调研过各种实现方案，发现它们基本都采用了Vue-i18n作为基本的工具。然后我们之前已经有一套完善的使用i18n-scanner实现国际化的方案，我们来回顾一下（部分代码）：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/** i18n */</span>
<span class="token keyword">interface</span> <span class="token class-name">ILangConfig</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>key<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        cn<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        tw<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        en<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> LangReturn<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> DefaultLang <span class="token operator">=</span> <span class="token keyword">typeof</span> zh_CN<span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">I18n</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultLang</span> <span class="token punctuation">{</span>
    <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">ILangConfig</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> LangReturn<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    language<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    printf<span class="token punctuation">:</span> <span class="token keyword">typeof</span> printf<span class="token punctuation">;</span>
    __<span class="token punctuation">:</span> <span class="token keyword">typeof</span> __<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

i18n<span class="token punctuation">.</span>__ <span class="token operator">=</span> window<span class="token punctuation">.</span>__ <span class="token operator">=</span> __<span class="token punctuation">;</span>

<span class="token comment">// @ts-ignore</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>locals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    globalTranslation <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">locals/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description
 * 语言包匹配
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> globalTranslation<span class="token punctuation">[</span>text<span class="token punctuation">]</span> <span class="token operator">||</span> text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过接口可以看出该<code>i18n</code>是一个函数，该函数可以接收一个<code>config</code>（语言包）参数然后返回一个带有对应当前语言的翻译文案；该函数有一个<code>language</code>属性代表当前语言；<code>__</code>则是收集与翻译字符串文案的关键；</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
 * @description
 * 扫描源代码文件，匹配需要翻译的文案，并输出excel文件待翻译
 */</span>
<span class="token keyword">function</span> <span class="token function">scanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i18nParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        lngs<span class="token punctuation">:</span> pkg<span class="token punctuation">.</span>locals<span class="token punctuation">,</span>
        nsSeparator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        keySeparator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        pluralSeparator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        contextSeparator<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    fs<span class="token punctuation">.</span><span class="token function">ensureDirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>locals<span class="token punctuation">,</span> <span class="token string">'xlsx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>appSrc <span class="token operator">+</span> <span class="token string">'/**/*.{js,jsx,ts,tsx}'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>

        i18nParser<span class="token punctuation">.</span><span class="token function">parseFuncFromString</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span> list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'__'</span><span class="token punctuation">,</span> <span class="token string">'i18n.__'</span><span class="token punctuation">,</span> <span class="token string">'window.__'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                i18nParser<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> i18nJson <span class="token operator">=</span> i18nParser<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>i18nJson<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> jsonDestination <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>locals<span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">'.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> excelDestination <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>locals<span class="token punctuation">,</span> <span class="token string">'xlsx'</span><span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">'.xlsx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> translation <span class="token operator">=</span> i18nJson<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>translation<span class="token punctuation">;</span>
        <span class="token keyword">const</span> existConfig <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>jsonDestination<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>jsonDestination<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> newConfig <span class="token operator">=</span> lodash<span class="token punctuation">.</span><span class="token function">pickBy</span><span class="token punctuation">(</span>existConfig<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> key <span class="token keyword">in</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        lodash<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>translation<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> newConfig<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                newConfig<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        fs<span class="token punctuation">.</span><span class="token function">outputFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>locals<span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">'.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newConfig<span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">convertJson2Excel</span><span class="token punctuation">(</span>newConfig<span class="token punctuation">,</span> key<span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>excelDestination<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        spinner<span class="token punctuation">.</span><span class="token function">succeed</span><span class="token punctuation">(</span><span class="token string">'输出 '</span> <span class="token operator">+</span> chalk<span class="token punctuation">.</span><span class="token function">bold</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' 到 '</span> <span class="token operator">+</span> chalk<span class="token punctuation">.</span><span class="token function">cyan</span><span class="token punctuation">(</span>excelDestination<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    spinner<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">yellow</span><span class="token punctuation">(</span><span class="token string">'你可以将生成的excel文件进行翻译后，放回原处。然后运行：'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'   npm run i18n-read'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面采用<a href="https://github.com/i18next/i18next-scanner" target="_blank" rel="noopener noreferrer">i18next-scanner<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>实现，上面的函数实现了扫描指定后缀名文件中使用<code>__</code>函数包裹的文案（16行-19行）。
最终导出了<code>json</code>文件和<code>Excel</code>。当然还有一个<code>read</code>函数可以读取<code>Excel</code>然后写入<code>json</code>文件中然后就完成了翻译。</p> <h2 id="总结回顾"><a href="#总结回顾" aria-hidden="true" class="header-anchor">#</a> 总结回顾</h2> <p>上面是我们对于<code>react</code> 多语言的实现方式。
下面说说它的特点：</p> <ol><li>需要手动提取文案（手动使用<code>__</code>函数包裹要翻译的文案）。</li> <li>使用i18next-scanner扫描对应文件提取汇总文案。</li> <li>切换语言需要强刷页面。</li></ol> <h2 id="对比"><a href="#对比" aria-hidden="true" class="header-anchor">#</a> 对比</h2> <p>对于本次vue的实现方案的调研中发现：很多都是用一个有意义的英文键名还有一定的层次结构去组织文案。可以对比一下上面react的方案：</p> <ol><li>之前react方案下的语言包：</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// zh</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;标题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;标题&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// en</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;标题&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;title&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string">'标题'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>大部分vue-i18n道友的语言包：</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// zh</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;home&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  	<span class="token string">&quot;title&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;标题&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// en</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;home&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  	<span class="token string">&quot;title&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;title&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">'home.title'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>对比可以发现方案1只有一层结构，方案2会出现多层。</li> <li>使用时呢明显方案1会更清晰明了。</li> <li>文案提取方式：方案1使用nodejs的能力自动一键提取，方案2则需要手动维护一个json文件或者js文件，还要去考虑它的组织、层级等。</li> <li>方案1需要强刷页面，方案2则可无刷新翻译（依赖vue响应式数据的能力）。</li></ul> <h2 id="方案3"><a href="#方案3" aria-hidden="true" class="header-anchor">#</a> 方案3</h2> <p>现在我们想使用方案1提供的便捷但又想使用方案2带来的无刷新体验。那就需要综合两者实行方案3。
方案3：vue-i18n + i18next-scanner
第一步：我们要将vue-i18n插件安装到我们项目到vue上：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueI18n <span class="token keyword">from</span> <span class="token string">'vue-i18n'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueI18n<span class="token punctuation">)</span>
</code></pre></div><p>第二步：实例化vuei8n：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token constant">EN_US</span> <span class="token keyword">from</span> <span class="token string">'./lang/en_US.json'</span>
<span class="token keyword">import</span> <span class="token constant">ZH_CN</span> <span class="token keyword">from</span> <span class="token string">'./lang/zh_CN.json'</span>

<span class="token keyword">const</span> esop <span class="token operator">=</span> <span class="token function">getTokenObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 读取用户本地保存的语言配置</span>
<span class="token keyword">const</span> locale <span class="token operator">=</span> esop <span class="token operator">?</span> esop<span class="token punctuation">.</span>lang <span class="token punctuation">:</span> <span class="token string">'zh-CN'</span>
<span class="token keyword">const</span> i18n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueI18n</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  locale<span class="token punctuation">,</span>
  messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'en-US'</span><span class="token punctuation">:</span> <span class="token constant">EN_US</span><span class="token punctuation">,</span>
    <span class="token string">'zh-CN'</span><span class="token punctuation">:</span> <span class="token constant">ZH_CN</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>第三步：将翻译方法绑定到全局和Vue原型链上：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> t <span class="token operator">=</span> i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>i18n<span class="token punctuation">)</span>
<span class="token comment">// 只翻译不扫描，__.$t(_scan('你是{name}'), { name: '小虎' })</span>
t<span class="token punctuation">.</span>$t <span class="token operator">=</span> t
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__ <span class="token operator">=</span> window<span class="token punctuation">.</span>__ <span class="token operator">=</span> t
<span class="token comment">// 只扫描不翻译</span>
window<span class="token punctuation">.</span><span class="token function-variable function">_scan</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v

document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>lang <span class="token operator">=</span> locale
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span>
</code></pre></div><p>上面不同方法的使用场景：
所有的<code>__</code>包裹的文案都将被匹配扫描。
模版中：</p> <ul><li>普通文案：__('文案')</li> <li>带插值：<code>this.$t(_scan('你是{name}'), { name: '小虎' })</code>（要放到计算属性里）；当然也可以直接插入模版，像这样：<code>$t(__.$t('你是{name}'), { name: '小虎' })</code></li></ul> <p>js函数中：</p> <ul><li>普通文案：__('文案')</li> <li>带插值：<code>__.$t(_scan('你是{name}'), { name: '小虎' })</code></li></ul> <p>js字面量中：</p> <ul><li>普通文案：_scan('文案')</li></ul> <p>第四步：使用<code>i18next-scanner</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * @description
 * 扫描源代码文件，匹配需要翻译的文案
 */</span>
<span class="token keyword">function</span> <span class="token function">scanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> i18nParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    lngs<span class="token punctuation">:</span> pkg<span class="token punctuation">.</span>locals<span class="token punctuation">,</span>
    nsSeparator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    keySeparator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    pluralSeparator<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    contextSeparator<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>appSrc <span class="token operator">+</span> <span class="token string">'/**/*.{vue,js,jsx,ts,tsx}'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>

    i18nParser<span class="token punctuation">.</span><span class="token function">parseFuncFromString</span><span class="token punctuation">(</span>
      content<span class="token punctuation">,</span>
      <span class="token punctuation">{</span> list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'__'</span><span class="token punctuation">,</span> <span class="token string">'window.__'</span><span class="token punctuation">,</span> <span class="token string">'window._scan'</span><span class="token punctuation">,</span> <span class="token string">'_scan'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          i18nParser<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> i18nJson <span class="token operator">=</span> i18nParser<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>i18nJson<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> jsonDestination <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>i18nLang<span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">'.json'</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> translation <span class="token operator">=</span> i18nJson<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>translation
    <span class="token keyword">const</span> existConfig <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>jsonDestination<span class="token punctuation">)</span>
      <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>jsonDestination<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">const</span> newConfig <span class="token operator">=</span> lodash<span class="token punctuation">.</span><span class="token function">pickBy</span><span class="token punctuation">(</span>
      existConfig<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> key <span class="token keyword">in</span> translation
    <span class="token punctuation">)</span>

    lodash<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>translation<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> newConfig<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        newConfig<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    fs<span class="token punctuation">.</span><span class="token function">outputFile</span><span class="token punctuation">(</span>
      path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>paths<span class="token punctuation">.</span>i18nLang<span class="token punctuation">,</span> key <span class="token operator">+</span> <span class="token string">'.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newConfig<span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>第五步：编写npm script</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	<span class="token property">&quot;scan&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/i18n.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后执行npm run scan即可扫描提取文案。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/17/2019, 7:46:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Roundtable/Question-Bank/work-practices/eslintPrettier.html" class="prev">团队代码质量：eslint+husky+prettier+lint-staged</a></span> <span class="next"><a href="/Roundtable/Wanted/pwa.html">Progressive Web Apps</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Roundtable/assets/js/app.d395b3ed.js" defer></script><script src="/Roundtable/assets/js/2.a96cdc04.js" defer></script><script src="/Roundtable/assets/js/62.3ac82e59.js" defer></script>
  </body>
</html>
