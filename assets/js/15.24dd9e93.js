(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{210:function(t,a,e){t.exports=e.p+"assets/img/WX20191024-122130.6037594d.png"},258:function(t,a,e){"use strict";e.r(a);var s=e(0),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),s("blockquote",[s("p",[t._v("Nginx相关问题记录")])]),t._v(" "),s("hr"),t._v(" "),s("h4",{attrs:{id:"_1、nginx目录穿越漏洞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、nginx目录穿越漏洞","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、Nginx目录穿越漏洞")]),t._v(" "),s("p",[t._v("常见于 Nginx 做反向代理的情况，动态的部分被 proxy_pass 传递给后端端口，而静态文件需要 Nginx 来处理。")]),t._v(" "),s("p",[t._v("假设静态文件存储在 /home/目录下，而该目录在 url 中名字为 files ，那么就需要用 alias 设置目录的别名：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("location /files "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" alias /home/; "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("此时，访问http://example.com/files/readme.txt， 就可以获取/home/readme.txt文件。")]),t._v(" "),s("p",[t._v("但我们注意到，url上/files没有加后缀/，而alias设置的/home/是有后缀/的，这个/就导致我们可以从/home/目录穿越到他的上层目录：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(210),alt:"目录穿越"}})]),t._v(" "),s("p",[t._v("进而我们获得了一个任意文件下载漏洞。")]),t._v(" "),s("blockquote",[s("p",[t._v("如何解决这个漏洞？")])]),t._v(" "),s("p",[t._v("只需要保证 location 和 alias 的值"),s("code",[t._v("都有")]),t._v("后缀/ 或"),s("code",[t._v("都没有")]),t._v("这个后缀。")])])}),[],!1,null,null,null);a.default=n.exports}}]);